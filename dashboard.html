<div id="ambient-controller" style="position: fixed; bottom: 30px; right: 30px; z-index: 9999; background: rgba(15, 23, 42, 0.9); border: 1px solid #8b5cf6; padding: 15px; border-radius: 16px; backdrop-filter: blur(10px); width: 220px; box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
        <span style="color: #a78bfa; font-size: 11px; font-weight: 800; letter-spacing: 1px; text-transform: uppercase;">Atmosphere</span>
        <div style="display: flex; gap: 2px;">
            <div class="bar" style="width: 2px; height: 8px; background: #8b5cf6; animation: music-wave 1s infinite;"></div>
            <div class="bar" style="width: 2px; height: 12px; background: #8b5cf6; animation: music-wave 1.2s infinite;"></div>
            <div class="bar" style="width: 2px; height: 6px; background: #8b5cf6; animation: music-wave 0.8s infinite;"></div>
        </div>
    </div>

    <select id="dashPicker" style="width: 100%; background: #000; color: white; border: 1px solid #333; padding: 8px; border-radius: 8px; font-size: 12px; margin-bottom: 10px; outline: none;">
        <option value="rain.mp3">üåßÔ∏è Rain</option>
        <option value="fire.mp3">üî• Fire Crackle</option>
        <option value="piano.mp3">üéπ Waterfall Piano</option>
    </select>

    <button id="playToggle" onclick="handleMusic()" style="width: 100%; background: linear-gradient(to right, #8b5cf6, #3b82f6); color: white; border: none; padding: 10px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 12px;">
        PLAY SOUND
    </button>

    <audio id="ambientPlayer" loop></audio>
</div>

<style>
    @keyframes music-wave {
        0%, 100% { transform: scaleY(1); }
        50% { transform: scaleY(1.5); }
    }
</style>

<script>
    function handleMusic() {
        const audio = document.getElementById('ambientPlayer');
        const picker = document.getElementById('dashPicker');
        const btn = document.getElementById('playToggle');

        if (audio.paused) {
            audio.src = picker.value;
            audio.play();
            btn.innerText = "PAUSE";
            btn.style.background = "#ef4444"; // Change to red when playing
        } else {
            audio.pause();
            btn.innerText = "PLAY SOUND";
            btn.style.background = "linear-gradient(to right, #8b5cf6, #3b82f6)";
        }
    }
</script>